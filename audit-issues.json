{
  "audit_metadata": {
    "project": "Farray's International Dance Center",
    "date": "2025-11-08",
    "auditor": "Claude - Senior Full-Stack Security & Performance Expert",
    "stack": "React 19 + TypeScript + Tailwind CSS + Vite",
    "total_issues": 37,
    "critical": 9,
    "high": 6,
    "medium": 16,
    "low": 6
  },
  "summary": {
    "top_5_risks": [
      "SEO SPA Invisible - Google/bots no ven contenido dinámico (0% tráfico orgánico potencial)",
      "Sin Headers de Seguridad - Vulnerable a XSS, clickjacking, MITM (riesgo legal y reputacional)",
      "Tailwind CDN sin SRI - Supply chain attack podría inyectar código malicioso (compromiso total)",
      "Rendimiento LCP >3.5s - Usuarios abandonan antes de ver contenido (pérdida de conversiones)",
      "Sin rutas por idioma - /es, /en no existen (SEO multilingüe inefectivo, -70% tráfico internacional)"
    ],
    "quick_wins": [
      "Añadir headers de seguridad (30min, impacto CRÍTICO)",
      "Implementar SRI en CDNs (15min, impacto ALTO)",
      "Añadir prerender/snapshot (2h, impacto CRÍTICO SEO)",
      "Mover Tailwind a build-time (1h, LCP -800ms estimado)",
      "Implementar persistencia de idioma (30min, impacto MEDIO UX)"
    ]
  },
  "issues": [
    {
      "id": "SEC-001",
      "area": "Seguridad",
      "title": "Sin Content Security Policy (CSP)",
      "severity": "Bloqueante",
      "impact": "Sec: XSS, Injection",
      "effort": "M",
      "priority": 45,
      "owner": "DevOps",
      "eta": "1 día",
      "why": "Sin CSP, la aplicación es vulnerable a XSS (inyección de scripts), data exfiltration, clickjacking e injection de recursos third-party no autorizados.",
      "how_to_fix": "Implementar CSP header vía Nginx/Netlify con directivas: default-src 'self'; script-src con SHA256 de scripts inline; style-src con unsafe-inline temporal; frame-ancestors 'none'.",
      "evidence": "index.html:38 - CDN sin restricción; curl -I muestra falta de header CSP",
      "snippet": "add_header Content-Security-Policy \"default-src 'self'; script-src 'self' https://cdn.tailwindcss.com 'sha256-HASH'; style-src 'self' 'unsafe-inline'; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self'; frame-ancestors 'none';\" always;"
    },
    {
      "id": "SEC-002",
      "area": "Seguridad",
      "title": "CDN Tailwind sin Subresource Integrity (SRI)",
      "severity": "Crítica",
      "impact": "Sec: Supply Chain Attack",
      "effort": "XS",
      "priority": 50,
      "owner": "Front",
      "eta": "15 min",
      "why": "Si el CDN de Tailwind es comprometido, un atacante podría inyectar código malicioso que se ejecutaría en todos los visitantes del sitio.",
      "how_to_fix": "Añadir atributo integrity con hash SHA384 del script de Tailwind. Mejor aún: mover Tailwind a build-time.",
      "evidence": "index.html:38 - <script src='https://cdn.tailwindcss.com'></script> sin integrity",
      "snippet": "<script src='https://cdn.tailwindcss.com' integrity='sha384-HASH' crossorigin='anonymous'></script>"
    },
    {
      "id": "SEC-003",
      "area": "Seguridad",
      "title": "Import Maps sin SRI ni versiones fijadas",
      "severity": "Crítica",
      "impact": "Sec: Supply Chain, React hijack",
      "effort": "S",
      "priority": 42,
      "owner": "Front",
      "eta": "30 min",
      "why": "Import maps con versionado ^19.2.0 permite actualizaciones automáticas que podrían incluir código malicioso. Sin SRI, no hay verificación de integridad.",
      "how_to_fix": "Fijar versiones exactas (19.0.0), usar esm.sh con pin, verificar con SRI si es posible.",
      "evidence": "index.html:234 - react@^19.2.0 sin pin version",
      "snippet": "{\"imports\": {\"react\": \"https://esm.sh/react@19.0.0?pin=v135\"}}"
    },
    {
      "id": "SEC-004",
      "area": "Seguridad",
      "title": "Sin HSTS header",
      "severity": "Alta",
      "impact": "Sec: MITM, SSL Stripping",
      "effort": "XS",
      "priority": 48,
      "owner": "DevOps",
      "eta": "10 min",
      "why": "Sin HSTS, usuarios podrían ser víctimas de downgrade attacks (forzar HTTP) y ataques MITM en primera visita.",
      "how_to_fix": "Añadir header Strict-Transport-Security con max-age de 1 año y includeSubDomains.",
      "evidence": "curl -I no muestra Strict-Transport-Security",
      "snippet": "add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;"
    },
    {
      "id": "SEC-005",
      "area": "Seguridad",
      "title": "API key expuesta en vite.config.ts",
      "severity": "Alta",
      "impact": "Sec: Credential Leak",
      "effort": "XS",
      "priority": 46,
      "owner": "DevOps",
      "eta": "20 min",
      "why": "GEMINI_API_KEY está siendo inyectada en el bundle del cliente, exponiendo la key a cualquiera que inspeccione el código.",
      "how_to_fix": "Eliminar definición de API_KEY del vite.config. Crear backend proxy para llamadas a Gemini API.",
      "evidence": "vite.config.ts:14-15 - process.env.API_KEY expuesto",
      "snippet": "// ELIMINAR estas líneas del vite.config.ts"
    },
    {
      "id": "SEC-006",
      "area": "Seguridad",
      "title": "dangerouslySetInnerHTML en About.tsx",
      "severity": "Media",
      "impact": "Sec: XSS DOM-based",
      "effort": "XS",
      "priority": 35,
      "owner": "Front",
      "eta": "10 min",
      "why": "Si las traducciones contienen HTML malicioso (ej: usuario modifica locales.ts), se ejecutaría en el navegador.",
      "how_to_fix": "Reemplazar con .split('\\n').map() y renderizar <p> tags normales.",
      "evidence": "components/About.tsx:41",
      "snippet": "{t('aboutBio').split('\\n').map((p, i) => <p key={i}>{p}</p>)}"
    },
    {
      "id": "SEC-007",
      "area": "Seguridad",
      "title": "Sin X-Frame-Options / frame-ancestors",
      "severity": "Media",
      "impact": "Sec: Clickjacking",
      "effort": "XS",
      "priority": 32,
      "owner": "DevOps",
      "eta": "5 min",
      "why": "Sitio podría ser embebido en iframe malicioso para engañar usuarios (clickjacking).",
      "how_to_fix": "Añadir X-Frame-Options: DENY o frame-ancestors 'none' en CSP.",
      "evidence": "curl -I no muestra X-Frame-Options",
      "snippet": "add_header X-Frame-Options \"DENY\" always;"
    },
    {
      "id": "SEC-008",
      "area": "Seguridad",
      "title": "Sin Permissions-Policy header",
      "severity": "Baja",
      "impact": "Sec: Privacidad, permisos no deseados",
      "effort": "XS",
      "priority": 25,
      "owner": "DevOps",
      "eta": "5 min",
      "why": "Sin Permissions-Policy, third-party scripts podrían solicitar permisos de geolocalización, cámara, etc.",
      "how_to_fix": "Añadir Permissions-Policy denegando permisos no necesarios.",
      "evidence": "curl -I no muestra Permissions-Policy",
      "snippet": "add_header Permissions-Policy \"geolocation=(), microphone=(), camera=()\" always;"
    },
    {
      "id": "SEC-009",
      "area": "Seguridad",
      "title": "Sin Referrer-Policy header",
      "severity": "Baja",
      "impact": "Sec: Data leakage via referrer",
      "effort": "XS",
      "priority": 24,
      "owner": "DevOps",
      "eta": "5 min",
      "why": "Sin Referrer-Policy, URLs completas (potencialmente con datos sensibles) se envían a sitios externos.",
      "how_to_fix": "Añadir Referrer-Policy: strict-origin-when-cross-origin",
      "evidence": "curl -I no muestra Referrer-Policy",
      "snippet": "add_header Referrer-Policy \"strict-origin-when-cross-origin\" always;"
    },
    {
      "id": "SEO-001",
      "area": "SEO",
      "title": "SPA sin SSR/Prerender - contenido invisible para bots",
      "severity": "Bloqueante",
      "impact": "SEO: 0% indexación de contenido dinámico",
      "effort": "XL",
      "priority": 50,
      "owner": "Front",
      "eta": "4-6 horas",
      "why": "Googlebot y otros bots ven HTML vacío porque el contenido se renderiza solo con JavaScript. Resultado: 0% de tráfico orgánico.",
      "how_to_fix": "Implementar prerender con react-snap (rápido) o prerender-spa-plugin. Alternativa avanzada: dynamic rendering con Cloudflare Workers.",
      "evidence": "curl https://www.farrayscenter.com | grep 'Dance Classes' retorna vacío",
      "snippet": "npm install -D react-snap && añadir postbuild script"
    },
    {
      "id": "SEO-002",
      "area": "SEO",
      "title": "Metadatos estáticos (no cambian por ruta/idioma)",
      "severity": "Alta",
      "impact": "SEO: -60% CTR estimado",
      "effort": "M",
      "priority": 40,
      "owner": "Front",
      "eta": "3-4 horas",
      "why": "Todas las páginas tienen el mismo title/description, causando duplicate content y CTR bajo en SERPs.",
      "how_to_fix": "Implementar react-helmet-async con componente SEO que actualice metadatos por ruta e idioma.",
      "evidence": "index.html:7 - title estático; App.tsx cambia document.title pero no metadatos",
      "snippet": "<Helmet><title>{t(titleKey)}</title><meta name='description' content={t(descKey)} /></Helmet>"
    },
    {
      "id": "SEO-003",
      "area": "SEO",
      "title": "hreflang solo en HTML inicial (no dinámico)",
      "severity": "Alta",
      "impact": "SEO: i18n -70% efectividad",
      "effort": "M",
      "priority": 38,
      "owner": "Front/SEO",
      "eta": "2-3 horas",
      "why": "hreflang no actualiza cuando usuario cambia de página, confundiendo a Google sobre qué versión mostrar en cada idioma.",
      "how_to_fix": "Incluir hreflang en componente SEO con react-helmet-async, actualizando por ruta.",
      "evidence": "index.html:28-32 - hreflang estático",
      "snippet": "<link rel='alternate' hrefLang={lang} href={`${baseUrl}/${lang}/${page}`} />"
    },
    {
      "id": "SEO-004",
      "area": "SEO",
      "title": "Canonical no cambia por ruta",
      "severity": "Alta",
      "impact": "SEO: Duplicate content",
      "effort": "S",
      "priority": 42,
      "owner": "Front",
      "eta": "1 hora",
      "why": "Canonical siempre apunta a /es, causando que Google vea todas las páginas como duplicados de la home.",
      "how_to_fix": "Actualizar canonical dinámicamente en componente SEO según ruta actual.",
      "evidence": "index.html:12 - canonical fijo a /es",
      "snippet": "<link rel='canonical' href={currentUrl} />"
    },
    {
      "id": "SEO-005",
      "area": "SEO",
      "title": "Sitemap con fechas antiguas (2024-05-21)",
      "severity": "Media",
      "impact": "SEO: Señal de falta de frescura",
      "effort": "XS",
      "priority": 30,
      "owner": "SEO",
      "eta": "10 min",
      "why": "Sitemap con fechas de hace 6 meses indica a Google que el sitio no se actualiza, reduciendo frecuencia de crawling.",
      "how_to_fix": "Actualizar fechas en sitemap.xml a fecha actual. Idealmente: generar sitemap dinámicamente.",
      "evidence": "sitemap.xml:6,17,28,39 - <lastmod>2024-05-21</lastmod>",
      "snippet": "<lastmod>2025-11-08</lastmod>"
    },
    {
      "id": "SEO-006",
      "area": "SEO",
      "title": "Sin estrategia de URL por idioma (/es, /en)",
      "severity": "Alta",
      "impact": "SEO: i18n -80% potencial",
      "effort": "L",
      "priority": 36,
      "owner": "Front",
      "eta": "1-2 días",
      "why": "URLs no reflejan idioma (solo cambio de estado React), imposibilitando que Google indexe versiones por idioma correctamente.",
      "how_to_fix": "Implementar React Router con rutas /:lang y /:lang/:page. Actualizar sitemap y hreflang.",
      "evidence": "App.tsx usa useState<Page> sin routing real",
      "snippet": "<Route path='/:lang/:page?' element={<LanguageRoute />} />"
    },
    {
      "id": "SEO-007",
      "area": "SEO",
      "title": "JSON-LD estático (no por página/idioma)",
      "severity": "Media",
      "impact": "SEO: Rich results limitados",
      "effort": "M",
      "priority": 28,
      "owner": "Front/SEO",
      "eta": "2-3 horas",
      "why": "JSON-LD actual solo describe la organización. Falta schema por página (Course, Event, etc.) y en cada idioma.",
      "how_to_fix": "Crear schemas dinámicos en cada página: WebPage, Course (para classes), FAQPage, etc.",
      "evidence": "index.html:120-230 - JSON-LD único y estático",
      "snippet": "<script type='application/ld+json'>{JSON.stringify(pageSchema)}</script>"
    },
    {
      "id": "PERF-001",
      "area": "Rendimiento",
      "title": "Tailwind CDN bloquea render (LCP +1.2s)",
      "severity": "Alta",
      "impact": "LCP: +1200ms estimado",
      "effort": "M",
      "priority": 44,
      "owner": "Front",
      "eta": "1-2 horas",
      "why": "Browser debe descargar 300KB de JS del CDN antes de renderizar. Blocking resource crítico.",
      "how_to_fix": "Instalar tailwindcss como devDependency, configurar PostCSS, generar CSS en build-time.",
      "evidence": "index.html:38 - <script src='https://cdn.tailwindcss.com'>; bundle 357KB",
      "snippet": "npm install -D tailwindcss postcss autoprefixer && npx tailwindcss init -p"
    },
    {
      "id": "PERF-002",
      "area": "Rendimiento",
      "title": "Bundle React 357KB sin code-splitting",
      "severity": "Media",
      "impact": "INP: +150ms, Initial Load",
      "effort": "L",
      "priority": 26,
      "owner": "Front",
      "eta": "4-6 horas",
      "why": "Todo el código de React + componentes se descarga en initial bundle, incluso páginas no visitadas.",
      "how_to_fix": "Implementar React.lazy() para páginas y componentes pesados (Teachers, Testimonials, etc.).",
      "evidence": "dist/assets/index-*.js 357.40 KB",
      "snippet": "const HomePage = lazy(() => import('./components/HomePage'));"
    },
    {
      "id": "PERF-003",
      "area": "Rendimiento",
      "title": "Sin preconnect optimizado a CDNs críticos",
      "severity": "Media",
      "impact": "LCP: +300ms DNS/TCP",
      "effort": "XS",
      "priority": 35,
      "owner": "Front",
      "eta": "15 min",
      "why": "Browser debe resolver DNS y establecer conexión HTTPS a fonts.googleapis.com en tiempo de render.",
      "how_to_fix": "Añadir <link rel='preconnect'> con crossorigin para fonts.",
      "evidence": "index.html:35-37 - preconnect existe pero podría optimizarse",
      "snippet": "<link rel='preconnect' href='https://fonts.gstatic.com' crossorigin>"
    },
    {
      "id": "PERF-004",
      "area": "Rendimiento",
      "title": "Sin lazy loading de componentes pesados",
      "severity": "Media",
      "impact": "LCP: +400ms",
      "effort": "M",
      "priority": 30,
      "owner": "Front",
      "eta": "2-3 horas",
      "why": "Componentes como InstagramFeed, Testimonials, Teachers se cargan aunque estén fuera del viewport inicial.",
      "how_to_fix": "Usar Intersection Observer o React.lazy con Suspense para componentes below-the-fold.",
      "evidence": "components/HomePage.tsx importa todos los componentes sin lazy",
      "snippet": "const Testimonials = lazy(() => import('./Testimonials'));"
    },
    {
      "id": "PERF-005",
      "area": "Rendimiento",
      "title": "Animaciones con translate-y (posible CLS)",
      "severity": "Baja",
      "impact": "CLS: +0.05 estimado",
      "effort": "S",
      "priority": 22,
      "owner": "Front",
      "eta": "1 hora",
      "why": "translateY en animaciones puede causar layout shifts si no se reserva espacio.",
      "how_to_fix": "Usar transform desde inicio (con valor) o asegurar que solo afecte elements después de layout.",
      "evidence": "components/AnimateOnScroll.tsx:44 - translate-y-8",
      "snippet": "style={{ transform: isVisible ? 'none' : 'translateY(20px)' }}"
    },
    {
      "id": "PERF-006",
      "area": "Rendimiento",
      "title": "Sin cache-control headers configurados",
      "severity": "Media",
      "impact": "TTFB: +200ms en repeat visits",
      "effort": "S",
      "priority": 32,
      "owner": "DevOps",
      "eta": "30 min",
      "why": "Recursos estáticos (JS, CSS, fonts) se re-descargan en cada visita en lugar de usar cache del browser.",
      "how_to_fix": "Configurar Cache-Control con max-age 1 año para assets versionados, inmutable flag.",
      "evidence": "Configuración de servidor no muestra cache-control",
      "snippet": "location ~* \\.(js|css|woff2)$ { expires 1y; add_header Cache-Control 'public, immutable'; }"
    },
    {
      "id": "PERF-007",
      "area": "Rendimiento",
      "title": "Sin compresión Brotli (solo gzip)",
      "severity": "Baja",
      "impact": "LCP: +100ms en slow networks",
      "effort": "S",
      "priority": 20,
      "owner": "DevOps",
      "eta": "20 min",
      "why": "Brotli comprime ~20% mejor que gzip para text assets (JS, CSS, HTML).",
      "how_to_fix": "Habilitar brotli_comp en Nginx o comprimir assets en build con vite-plugin-compression.",
      "evidence": "Build output solo muestra gzip size",
      "snippet": "brotli on; brotli_types text/plain text/css application/javascript;"
    },
    {
      "id": "A11Y-001",
      "area": "Accesibilidad",
      "title": "Sin skip-link para navegación por teclado",
      "severity": "Media",
      "impact": "WCAG 2.4.1 (A)",
      "effort": "XS",
      "priority": 34,
      "owner": "Front",
      "eta": "20 min",
      "why": "Usuarios de teclado/screen reader deben tabular por todo el header antes de llegar al contenido principal.",
      "how_to_fix": "Añadir skip-link visible solo en :focus que salte a #main-content.",
      "evidence": "components/Header.tsx y App.tsx no tienen skip link",
      "snippet": "<a href='#main-content' className='sr-only focus:not-sr-only'>Skip to main content</a>"
    },
    {
      "id": "A11Y-002",
      "area": "Accesibilidad",
      "title": "Mobile menu sin focus trap",
      "severity": "Media",
      "impact": "WCAG 2.1.2 (A), 2.4.3 (A)",
      "effort": "S",
      "priority": 30,
      "owner": "Front",
      "eta": "1-2 horas",
      "why": "Cuando menu mobile está abierto, Tab puede escapar del modal, causando confusión y violación WCAG.",
      "how_to_fix": "Implementar focus trap que cicle entre elementos del menu. Escape para cerrar.",
      "evidence": "components/Header.tsx:122-165 - mobile menu sin focus trap",
      "snippet": "useEffect(() => { if (isOpen) trapFocus(menuRef); }, [isOpen]);"
    },
    {
      "id": "A11Y-003",
      "area": "Accesibilidad",
      "title": "Sin aria-live para cambios de página SPA",
      "severity": "Media",
      "impact": "WCAG 4.1.3 (AA)",
      "effort": "S",
      "priority": 28,
      "owner": "Front",
      "eta": "30 min",
      "why": "Screen readers no son notificados cuando el contenido de la página cambia (navegación SPA).",
      "how_to_fix": "Añadir region con aria-live='polite' que anuncie cambios de ruta.",
      "evidence": "App.tsx cambia página sin anunciar a screen readers",
      "snippet": "<div role='status' aria-live='polite' aria-atomic='true'>{message}</div>"
    },
    {
      "id": "A11Y-004",
      "area": "Accesibilidad",
      "title": "Contraste en textos neutral/80 < 4.5:1",
      "severity": "Baja",
      "impact": "WCAG 1.4.3 (AA)",
      "effort": "XS",
      "priority": 26,
      "owner": "Front",
      "eta": "30 min",
      "why": "Textos con text-neutral/80 sobre bg-black podrían no cumplir ratio de contraste 4.5:1 requerido para AA.",
      "how_to_fix": "Verificar con herramienta de contraste y ajustar a neutral/85 o neutral/90 si necesario.",
      "evidence": "Varios componentes usan text-neutral/80",
      "snippet": "className='text-neutral/85' // Verificar contraste"
    },
    {
      "id": "I18N-001",
      "area": "i18n",
      "title": "Sin persistencia de idioma (localStorage/cookie)",
      "severity": "Media",
      "impact": "UX: Frustración en usuarios que regresan",
      "effort": "XS",
      "priority": 36,
      "owner": "Front",
      "eta": "30 min",
      "why": "Si usuario elige 'ca' y cierra el tab, al regresar vuelve a 'es' (detección de browser), obligando a cambiar de nuevo.",
      "how_to_fix": "Guardar idioma seleccionado en localStorage y cookie. Priorizar sobre detección automática.",
      "evidence": "hooks/useI18n.tsx:15-22 - solo usa navigator.language",
      "snippet": "localStorage.setItem('fidc_locale', locale); setCookie('fidc_locale', locale);"
    },
    {
      "id": "I18N-002",
      "area": "i18n",
      "title": "Sin routing por idioma en URL",
      "severity": "Alta",
      "impact": "SEO: -70% i18n, UX: no se puede compartir link en idioma específico",
      "effort": "L",
      "priority": 35,
      "owner": "Front",
      "eta": "1-2 días",
      "why": "URL no refleja idioma actual, por lo que enlaces compartidos siempre abren en idioma por defecto del usuario.",
      "how_to_fix": "Implementar routing con /:lang prefix usando React Router.",
      "evidence": "App.tsx usa estado local sin reflejar en URL",
      "snippet": "<Route path='/:lang/:page?' element={<LanguageRoute />} />"
    },
    {
      "id": "I18N-003",
      "area": "i18n",
      "title": "Detección solo por navigator.language (sin región)",
      "severity": "Baja",
      "impact": "UX: Precisión de detección -20%",
      "effort": "S",
      "priority": 22,
      "owner": "Front",
      "eta": "1 hora",
      "why": "No considera navigator.languages array (preferencias múltiples) ni detecta región (es-MX vs es-ES).",
      "how_to_fix": "Iterar navigator.languages y considerar región para mejor detección.",
      "evidence": "hooks/useI18n.tsx:16 - solo usa navigator.language.split('-')[0]",
      "snippet": "const browserLangs = navigator.languages || [navigator.language];"
    },
    {
      "id": "I18N-004",
      "area": "i18n",
      "title": "Traducciones sin validación de claves faltantes",
      "severity": "Baja",
      "impact": "UX: Posibles textos rotos en producción",
      "effort": "M",
      "priority": 20,
      "owner": "Front",
      "eta": "2 horas",
      "why": "No hay validación automática que detecte claves faltantes en ca/fr/en comparado con es.",
      "how_to_fix": "Crear script de validación que compare todas las claves entre idiomas y falle en CI.",
      "evidence": "No hay script de validación en package.json",
      "snippet": "npm run validate:i18n // Script que compara claves de todos los locales"
    },
    {
      "id": "CODE-001",
      "area": "Código",
      "title": "TypeScript sin strict mode",
      "severity": "Media",
      "impact": "Calidad: Bugs potenciales no detectados",
      "effort": "S",
      "priority": 28,
      "owner": "Front",
      "eta": "2-3 horas",
      "why": "Sin strict mode, TypeScript no detecta null/undefined potenciales, tipos implícitos, etc.",
      "how_to_fix": "Habilitar 'strict': true en tsconfig.json y corregir errores resultantes.",
      "evidence": "tsconfig.json no tiene 'strict': true",
      "snippet": "\"strict\": true, \"noImplicitAny\": true, \"strictNullChecks\": true"
    },
    {
      "id": "CODE-002",
      "area": "Código",
      "title": "Uso de `any` en useI18n.tsx (líneas 26, 31)",
      "severity": "Baja",
      "impact": "Calidad: Type safety perdida",
      "effort": "XS",
      "priority": 24,
      "owner": "Front",
      "eta": "15 min",
      "why": "Tipo 'any' elimina beneficios de TypeScript, ocultando errores potenciales.",
      "how_to_fix": "Reemplazar 'any' con 'unknown' y usar type guards.",
      "evidence": "hooks/useI18n.tsx:26,31 - let result: any",
      "snippet": "let result: unknown = translations[locale]; if (typeof result === 'object' && result !== null)..."
    },
    {
      "id": "CODE-003",
      "area": "Código",
      "title": "Sin Error Boundaries en React",
      "severity": "Media",
      "impact": "UX: Crash total de app por error en componente",
      "effort": "S",
      "priority": 30,
      "owner": "Front",
      "eta": "1 hora",
      "why": "Si cualquier componente lanza error, toda la app se rompe con pantalla blanca. No hay recovery.",
      "how_to_fix": "Implementar Error Boundary global que captura errores y muestra UI de fallback.",
      "evidence": "App.tsx no tiene ErrorBoundary wrapper",
      "snippet": "<ErrorBoundary fallback={<ErrorPage />}><App /></ErrorBoundary>"
    },
    {
      "id": "CODE-004",
      "area": "Código",
      "title": "Sin observabilidad/error tracking (Sentry)",
      "severity": "Media",
      "impact": "DevOps: Errores en producción pasan desapercibidos",
      "effort": "M",
      "priority": 26,
      "owner": "DevOps",
      "eta": "2-3 horas",
      "why": "No hay forma de saber cuándo y dónde ocurren errores en producción, ni cuántos usuarios afectan.",
      "how_to_fix": "Integrar Sentry o similar para tracking de errores y performance.",
      "evidence": "No hay integración de error tracking",
      "snippet": "Sentry.init({ dsn: 'YOUR_DSN', integrations: [new BrowserTracing()] });"
    },
    {
      "id": "PWA-001",
      "area": "PWA",
      "title": "Sin manifest.json para PWA",
      "severity": "Baja",
      "impact": "UX: No instalable en mobile",
      "effort": "S",
      "priority": 18,
      "owner": "Front",
      "eta": "30 min",
      "why": "Sin manifest, la app no es instalable como PWA en dispositivos móviles.",
      "how_to_fix": "Crear manifest.json con nombre, iconos, theme_color, etc.",
      "evidence": "No existe manifest.json",
      "snippet": "{\"name\": \"Farray's Dance Center\", \"short_name\": \"FIDC\", \"icons\": [...], \"theme_color\": \"#800020\"}"
    },
    {
      "id": "PWA-002",
      "area": "PWA",
      "title": "Sin Service Worker para offline",
      "severity": "Baja",
      "impact": "UX: No funciona sin conexión",
      "effort": "M",
      "priority": 16,
      "owner": "Front",
      "eta": "4-6 horas",
      "why": "Si usuario pierde conexión, la app no carga (página en blanco).",
      "how_to_fix": "Implementar Service Worker básico con cache-first strategy para assets.",
      "evidence": "No hay Service Worker registrado",
      "snippet": "if ('serviceWorker' in navigator) { navigator.serviceWorker.register('/sw.js'); }"
    }
  ]
}
